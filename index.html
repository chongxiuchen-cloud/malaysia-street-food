<!DOCTYPE html>
<html>
<head>
    <meta charset="UTF-8">
    <title>Login & Register</title>
    <style>
        body {
            font-family: Arial;
            max-width: 400px;
            margin: auto;
            padding-top: 50px;
        }
        input {
            width: 100%;
            padding: 8px;
            margin: 5px 0;
        }
        button {
            width: 48%;
            padding: 8px;
            margin-top: 10px;
        }
    </style>
</head>
<body>

<h2>Register</h2>
<form onsubmit="event.preventDefault(); registerUser();">
    <label for="regEmail">Email:</label><br>
    <input type="email" id="regEmail" name="regEmail" required><br>
    <label for="regPassword">Password:</label><br>
    <input type="password" id="regPassword" name="regPassword" required><br>
    <button type="submit">Register</button>
</form>

<h2>Login</h2>
<form onsubmit="event.preventDefault(); loginUser();">
    <label for="loginEmail">Email:</label><br>
    <input type="email" id="loginEmail" name="loginEmail" required><br>
    <label for="loginPassword">Password:</label><br>
    <input type="password" id="loginPassword" name="loginPassword" required><br>
    <button type="submit">Login</button>
</form>

<script>

function setCookie(name, value, minutes) {
    let expDate = new Date();
    expDate.setMinutes(expDate.getMinutes() + minutes);
    document.cookie = `${name}=${value};expires=${expDate.toUTCString()};path=/`;
}


function getCookie(name) {
    let cookies = document.cookie.split(';');
    for (let c of cookies) {
        let [key, val] = c.trim().split('=');
        if (key === name) return val;
    }
    return null;
}


function registerUser() {
    let email = document.getElementById("regEmail").value;
    let password = document.getElementById("regPassword").value;

    if (!email || !password) {
        alert("Please enter email and password");
        return;
    }

    localStorage.setItem("userEmail", email);
    localStorage.setItem("userPassword", password);

 
    sessionStorage.setItem("sessionEmail", email);
    sessionStorage.setItem("sessionPassword", password);


    setCookie("email", email, 5);
    setCookie("password", password, 5);

    alert("Registration successful!");
}


function loginUser() {
    let email = document.getElementById("loginEmail").value;
    let password = document.getElementById("loginPassword").value;

    let storedEmail = localStorage.getItem("userEmail");
    let storedPassword = localStorage.getItem("userPassword");

    if (email === storedEmail && password === storedPassword) {
        alert("Login successful!");
        sessionStorage.setItem("isLoggedIn", "true");
        window.location.href = "home.html";
    } else {
        alert("Invalid email or password");
    }
}


window.onload = function() {
    let email = getCookie("email");
    let password = getCookie("password");
    let storedEmail = localStorage.getItem("userEmail");
    let storedPassword = localStorage.getItem("userPassword");

    if (email && password && email === storedEmail && password === storedPassword) {
        sessionStorage.setItem("isLoggedIn", "true");
        window.location.href = "home.html";
    }
};
</script>

</body>
</html>
